Input Buffering
Adds input buffering to Super Smash Bros. Melee
[Jacob Steelsmith]
Revision ---- DOL Offset ---- Hex to Replace ---------- ASM Code -
NTSC 1.02 --- 0x801A4DEC ---- 800D9368 -> Branch

# queue update
800d9368 3A400000
1E720020 3DC08000
61CE1818 7DCE9A14
3A000004 3A200014
81EE0000 91EE0004
7DD07050 7E308850
2C110000 4082FFEC
3E00804C 62101FAC
1E720044 7E109A14
81F00000 39CE0004
91EE0000 3A520001
2C120004 4082FFAC
b 0x801a4df0

<queue_search> NTSC 1.02
7E8802A6
bl <get_player_queue>
7E8803A6 3DE00000
824E0000 7E528038
7C128000 40820008
3A310001 39CE0004
39EF0001 2C0F0008
4082FFE0 4E800020
60000000 00000000

------------- 0x800D6984 ----

280C0000 4082000C 
38600000 48000024 
88050686 28000000 
40820014 

 -> 

# up special grounded
3E000001 62100200
7E6802A6
bl <queue_search>
7E6803A6 2C110000
41820014

------------- 0x800D6850 ----

4082000C 38600000 
48000024 88050689 
28000000 40820014 

 -> 

# neutral special grounded
3A000200 7E6802A6
bl <queue_search_exclude_stick>
7E6803A6 2C110000
41820014

------------- 0x800D68E8 ----

280C0000 4082000C 
38600000 48000024 
88050687 28000000 
40820014 

 -> 

# down special grounded
3E000002 62100200
7E6802A6
bl <queue_search>
7E6803A6 2C110000
41820014

------------- 0x800D89B4 ----

4182000C 38600001 
48000064 7FC3F378 
480004D1 2C030000 
4082000C 38600000 
4800004C 7FC3F378 
48000B51 2C030000 
4082000C 38600000 
48000034 801F065C 
54000001 41820024 

 -> 

# grab
3A000120 7E6802A6
bl <queue_search>
7E6803A6 2C110000
40820034 3A000140
7E6802A6
bl <queue_search>
7E6803A6 2C110000
4082001C 3A000010
7E6802A6
bl <queue_search>
7E6803A6 2C110000
41820024

------------- 0x800CAF14 ----

4082001C 88640671 
80050074 7C030000 
4080000C 38000001 
4800001C 80040668 
5400052B 4182000C 

 -> 

# jump grounded
60000000 60000000
60000000 60000000
3A000C00 7E6802A6
bl <queue_search_any>
7E6803A6 2C110000
41820028

<queue_search_any> NTSC 1.02
7E8802A6
bl <get_player_queue>
7E8803A6 3DE00000
824E0000 7E528038
2C120000 41820008
3A310001 39CE0004
39EF0001 2C0F0008
4082FFE0 4E800020
60000000 00000000

------------- 0x8008C8A8 ----

2C000000 40820014 
7FE3FB78 48052A25 
2C030000 

 -> 

# upsmash
3E000010 7E6802A6
bl <queue_search>
7E6803A6 2C110000

<queue_search_exclude_stick> NTSC 1.02
7E8802A6
bl <get_player_queue>
7E8803A6 3E60000F
7E738378 3DE00000
824E0000 7E529838
7C128000 40820008
3A310001 39CE0004
39EF0001 2C0F0008
4082FFE0 4E800020
60000000 00000000

------------- 0x8008CBBC ----

2C000000 40820014 
7FE3FB78 480527E1 
2C030000 

 -> 

# dsmash
3E000020 7E6802A6
bl <queue_search>
7E6803A6 2C110000

------------- 0x8008B680 ---- 418200EC -> Branch

# ftilt
3E000004 62100100
7E6802A6
bl <queue_search>
2C110000 4082000C
6E100006
bl <queue_search>
7E6803A6 2C110000
41820008
b 0x8008b684
b 0x8008b76c
60000000

------------- 0x8008BB6C ---- 41820078 -> Branch

# dtilt
3E000002 62100100
7E6802A6
bl <queue_search>
7E6803A6 2C110000
41820008
b 0x8008bb70
b 0x8008bbe4
60000000

------------- 0x8008B9A8 ---- 41820074 -> Branch

# utilt
3E000001 62100100
7E6802A6
bl <queue_search>
7E6803A6 2C110000
41820008
b 0x8008b9ac
b 0x8008ba1c
60000000

------------- 0x800D5D74 ---- 4E800020 -> Branch

# queue remove trigger
7E8802A6
bl <get_player_queue>
7E8803A6 3E00FFFF
6210FF9F 3DE00000
824E0000 7E528038
924E0000 39CE0004
39EF0001 2C0F0008
4082FFE8 4E800020
60000000 00000000

------------- 0x80099A70 ---- 41820018 -> Branch

# airdodge
3A000060 7E6802A6
bl <queue_search_any>
7E6803A6 2C110000
40820008
b 0x80099a88
b 0x80099a74
60000000

<get_player_queue> NTSC 1.02
3E200000 3DE00000
3E408045 62523130
81D20000 7C187000
41820010 39EF0001
3A520E90 4BFFFFEC
3DC08000 61CE1800
1DEF0020 7DCE7A14
4E800020 60000000

------------- 0x80096684 ---- 41820228 -> Branch

# special aerial
3A000200 7E6802A6
bl <queue_search>
7E6803A6 2C110000
41820008
b 0x80096688
b 0x800968ac
60000000

------------- 0x8009AB50 ----

41820010 

 -> 

# cliff fall
60000000

------------- 0x8009AB70 ----

41820018 

 -> 

# cliff climb
60000000

------------- 0x8008CD90 ---- 40820014 -> Branch

# attack aerial
3E0000F0 62100100
7E6802A6
bl <queue_search_any>
7E6803A6 2C110000
41820008
b 0x8008cda4
b 0x8008cdf0
60000000

------------- 0x8008AA1C ---- 418200FC -> Branch

# jab
3A000100 7E6802A6
bl <queue_search_exclude_stick>
7E6803A6 2C110000
41820008
b 0x8008aa20
b 0x8008ab18
60000000

------------- 0x800DFEC4 ---- 4E800020 -> Branch

7E8802A6
bl <get_player_queue>
7E8803A6 3E00FFF0
6210FFFF 3DE00000
824E0000 7E528038
924E0000 39CE0004
39EF0001 2C0F0008
4082FFE8 4E800020
60000000 00000000

------------- 0x80096578 ---- 4082000C -> Branch

# side special grounded
3E000004 62100200
7E6802A6
bl <queue_search>
7E6803A6 2C110000
4082001C 6E10000C
7E6802A6
bl <queue_search>
7E6803A6 2C110000
41820008
b 0x80096590
b 0x80096584
60000000 00000000